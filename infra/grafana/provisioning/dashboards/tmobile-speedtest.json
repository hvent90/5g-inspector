{
  "annotations": {
    "list": [
      {
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "enable": true,
        "expr": "tmobile_scheduler_running == 0",
        "iconColor": "orange",
        "name": "Scheduler Stopped",
        "titleFormat": "Scheduler Stopped"
      }
    ]
  },
  "editable": true,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "panels": [
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "max": 500,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "red", "value": null},
              {"color": "orange", "value": 25},
              {"color": "yellow", "value": 50},
              {"color": "green", "value": 100}
            ]
          },
          "unit": "Mbps"
        }
      },
      "gridPos": {"h": 8, "w": 6, "x": 0, "y": 0},
      "id": 1,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{"expr": "tmobile_speedtest_download_mbps", "refId": "A"}],
      "title": "Download Speed",
      "type": "gauge"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "red", "value": null},
              {"color": "orange", "value": 5},
              {"color": "yellow", "value": 10},
              {"color": "green", "value": 20}
            ]
          },
          "unit": "Mbps"
        }
      },
      "gridPos": {"h": 8, "w": 6, "x": 6, "y": 0},
      "id": 2,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{"expr": "tmobile_speedtest_upload_mbps", "refId": "A"}],
      "title": "Upload Speed",
      "type": "gauge"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"color": "green", "value": null},
              {"color": "yellow", "value": 30},
              {"color": "orange", "value": 50},
              {"color": "red", "value": 100}
            ]
          },
          "unit": "ms"
        }
      },
      "gridPos": {"h": 8, "w": 6, "x": 12, "y": 0},
      "id": 3,
      "options": {
        "orientation": "auto",
        "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false},
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [{"expr": "tmobile_speedtest_ping_ms", "refId": "A"}],
      "title": "Ping Latency",
      "type": "gauge"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]},
          "mappings": [
            {"options": {"0": {"color": "red", "text": "Stopped"}, "1": {"color": "green", "text": "Running"}}, "type": "value"}
          ]
        }
      },
      "gridPos": {"h": 4, "w": 3, "x": 18, "y": 0},
      "id": 4,
      "options": {"colorMode": "background", "graphMode": "none", "reduceOptions": {"calcs": ["lastNotNull"]}},
      "targets": [{"expr": "tmobile_scheduler_running", "refId": "A"}],
      "title": "Scheduler Status",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]},
          "unit": "s"
        }
      },
      "gridPos": {"h": 4, "w": 3, "x": 21, "y": 0},
      "id": 5,
      "options": {"colorMode": "value", "graphMode": "none", "reduceOptions": {"calcs": ["lastNotNull"]}},
      "targets": [{"expr": "tmobile_scheduler_next_test_seconds", "refId": "A"}],
      "title": "Next Test In",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}
        }
      },
      "gridPos": {"h": 4, "w": 3, "x": 18, "y": 4},
      "id": 6,
      "options": {"colorMode": "value", "graphMode": "area", "reduceOptions": {"calcs": ["lastNotNull"]}},
      "targets": [{"expr": "tmobile_scheduler_tests_total", "refId": "A"}],
      "title": "Tests Completed",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}
        }
      },
      "gridPos": {"h": 4, "w": 3, "x": 21, "y": 4},
      "id": 7,
      "options": {"colorMode": "value", "graphMode": "area", "reduceOptions": {"calcs": ["lastNotNull"]}},
      "targets": [{"expr": "tmobile_scheduler_tests_failed_total", "refId": "A"}],
      "title": "Tests Failed",
      "type": "stat"
    },
    {
      "datasource": {"type": "loki", "uid": "loki"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "drawStyle": "line",
            "fillOpacity": 10,
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "pointSize": 10,
            "showPoints": "always",
            "spanNulls": false
          },
          "unit": "Mbps"
        },
        "overrides": [
          {"matcher": {"id": "byName", "options": "Download"}, "properties": [{"id": "color", "value": {"fixedColor": "#73BF69", "mode": "fixed"}}]},
          {"matcher": {"id": "byName", "options": "Upload"}, "properties": [{"id": "color", "value": {"fixedColor": "#5794F2", "mode": "fixed"}}]}
        ]
      },
      "gridPos": {"h": 10, "w": 24, "x": 0, "y": 8},
      "id": 8,
      "options": {
        "legend": {"calcs": ["mean", "lastNotNull", "min", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi"}
      },
      "targets": [
        {"datasource": {"type": "loki", "uid": "loki"}, "expr": "max_over_time({job=\"tmobile-dashboard\", event_type=\"speedtest\", status=\"success\"} | json | unwrap download_mbps | __error__=\"\" [1m])", "legendFormat": "Download", "refId": "A"},
        {"datasource": {"type": "loki", "uid": "loki"}, "expr": "max_over_time({job=\"tmobile-dashboard\", event_type=\"speedtest\", status=\"success\"} | json | unwrap upload_mbps | __error__=\"\" [1m])", "legendFormat": "Upload", "refId": "B"}
      ],
      "title": "Speed Test History",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "loki", "uid": "loki"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {
            "drawStyle": "line",
            "fillOpacity": 10,
            "lineInterpolation": "linear",
            "lineWidth": 2,
            "pointSize": 10,
            "showPoints": "always",
            "spanNulls": false
          },
          "unit": "ms"
        },
        "overrides": [
          {"matcher": {"id": "byName", "options": "Ping"}, "properties": [{"id": "color", "value": {"fixedColor": "#F2CC0C", "mode": "fixed"}}]},
          {"matcher": {"id": "byName", "options": "Jitter"}, "properties": [{"id": "color", "value": {"fixedColor": "#FF9830", "mode": "fixed"}}]}
        ]
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 18},
      "id": 9,
      "options": {
        "legend": {"calcs": ["mean", "lastNotNull", "min", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi"}
      },
      "targets": [
        {"datasource": {"type": "loki", "uid": "loki"}, "expr": "max_over_time({job=\"tmobile-dashboard\", event_type=\"speedtest\", status=\"success\"} | json | unwrap ping_ms | __error__=\"\" [1m])", "legendFormat": "Ping", "refId": "A"},
        {"datasource": {"type": "loki", "uid": "loki"}, "expr": "max_over_time({job=\"tmobile-dashboard\", event_type=\"speedtest\", status=\"success\"} | json | unwrap jitter_ms | __error__=\"\" [1m])", "legendFormat": "Jitter", "refId": "B"}
      ],
      "title": "Latency History",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "custom": {"drawStyle": "bars", "fillOpacity": 80, "lineWidth": 0, "stacking": {"mode": "normal"}},
          "unit": "short"
        }
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 18},
      "id": 10,
      "options": {
        "legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true},
        "tooltip": {"mode": "multi"}
      },
      "targets": [
        {"expr": "tmobile_speedtest_network_context{context=\"baseline\"}", "legendFormat": "Baseline", "refId": "A"},
        {"expr": "tmobile_speedtest_network_context{context=\"idle\"}", "legendFormat": "Idle", "refId": "B"},
        {"expr": "tmobile_speedtest_network_context{context=\"light\"}", "legendFormat": "Light", "refId": "C"},
        {"expr": "tmobile_speedtest_network_context{context=\"busy\"}", "legendFormat": "Busy", "refId": "D"}
      ],
      "title": "Network Context",
      "type": "timeseries"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]},
          "unit": "Mbps"
        }
      },
      "gridPos": {"h": 4, "w": 6, "x": 0, "y": 26},
      "id": 11,
      "options": {"colorMode": "value", "graphMode": "area", "reduceOptions": {"calcs": ["lastNotNull"]}},
      "targets": [{"expr": "tmobile_scheduler_avg_download_mbps", "refId": "A"}],
      "title": "Avg Download (Session)",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]},
          "unit": "Mbps"
        }
      },
      "gridPos": {"h": 4, "w": 6, "x": 6, "y": 26},
      "id": 12,
      "options": {"colorMode": "value", "graphMode": "area", "reduceOptions": {"calcs": ["lastNotNull"]}},
      "targets": [{"expr": "tmobile_scheduler_avg_upload_mbps", "refId": "A"}],
      "title": "Avg Upload (Session)",
      "type": "stat"
    },
    {
      "datasource": {"type": "prometheus", "uid": "prometheus"},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "thresholds"},
          "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "orange", "value": 1}, {"color": "red", "value": 5}]}
        }
      },
      "gridPos": {"h": 4, "w": 6, "x": 12, "y": 26},
      "id": 13,
      "options": {"colorMode": "value", "graphMode": "area", "reduceOptions": {"calcs": ["lastNotNull"]}},
      "targets": [{"expr": "tmobile_scheduler_tests_below_threshold_total", "refId": "A"}],
      "title": "Tests Below Threshold",
      "type": "stat"
    }
  ],
  "refresh": "30s",
  "schemaVersion": 38,
  "style": "dark",
  "tags": ["tmobile", "speedtest", "performance"],
  "templating": {"list": []},
  "time": {"from": "now-24h", "to": "now"},
  "timepicker": {},
  "title": "T-Mobile Speed Tests",
  "uid": "tmobile-speedtest",
  "version": 1
}
